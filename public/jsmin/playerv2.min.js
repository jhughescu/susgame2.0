document.addEventListener("DOMContentLoaded",(function(){console.log("a player"),console.log(window.location.pathname);let e=null,o=null,n=null,t="fid",l=null;const a=window.getQueries(window.location.href),s="true"===a.fake,r=()=>{};window.resetFake=r;const c=()=>{e.emit("getGameCount",(r=>{0===r?Date.now()-l<1e4?setTimeout(c,500):console.log("giving up looking for games"):(()=>{let l=a.hasOwnProperty(t)?a[t]:s?"":localStorage.getItem(n);console.log(`registerwithGame: ${l} ${a.hasOwnProperty(t)?"(from query)":""}`);const r={game:o,player:l,fake:s};e.emit("regPlayer",r,(e=>{e&&(e.indexOf("f",0)>-1&&(n+=e,a.hasOwnProperty(t)),localStorage.setItem(n,e))}))})()}))},i=e=>{o=window.location.pathname,n=e,l=Date.now(),c()},d=()=>{e.on("playerConnect",(e=>{i(e)})),e.on("resetAll",r),e.on("teamsAssigned",(e=>{(e=>{console.log("teamsAssigned"),console.log(e),console.log(e.address,o),console.log(e.address===o),e.address})(e)}))};(()=>{let o=null;e=io(window.location.pathname),o=setInterval((()=>{e.connected&&(clearInterval(o),d(),console.log("connected"))}),300)})()}));
